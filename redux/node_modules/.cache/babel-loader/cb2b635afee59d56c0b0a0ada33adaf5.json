{"ast":null,"code":"import axios from \"axios\";\nimport { initListAction } from \"./actionCreators\";\nimport { put, takeEvery } from 'redux-saga/effects';\nimport { GET_INIT_LIST } from './actionTypes'; // ES6 generator 函数\n\nfunction* getInitList() {\n  try {\n    const res = yield axios.get('http://www.hemaisi.com/service/msg/get?page=1&limit=5');\n    const arr = res.data.data;\n    let list = [];\n\n    for (let v of arr) {\n      list.push(v['ip_city']);\n    }\n\n    const action = initListAction(list);\n    yield put(action);\n  } catch (e) {\n    console.log('network error');\n  }\n}\n\nfunction* mySaga() {\n  // 捕获每次派发出来的action\n  yield takeEvery(GET_INIT_LIST, getInitList);\n}\n\nexport default mySaga;","map":{"version":3,"sources":["C:\\Users\\LYJ\\Desktop\\github\\React\\redux\\src\\store\\sagas.js"],"names":["axios","initListAction","put","takeEvery","GET_INIT_LIST","getInitList","res","get","arr","data","list","v","push","action","e","console","log","mySaga"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,cAAR,QAA6B,kBAA7B;AACA,SAASC,GAAT,EAAaC,SAAb,QAA8B,oBAA9B;AACA,SAASC,aAAT,QAA8B,eAA9B,C,CACA;;AACA,UAAUC,WAAV,GAAwB;AACpB,MAAI;AACA,UAAMC,GAAG,GAAI,MAAMN,KAAK,CAACO,GAAN,CAAU,uDAAV,CAAnB;AACA,UAAMC,GAAG,GAAGF,GAAG,CAACG,IAAJ,CAASA,IAArB;AACA,QAAIC,IAAI,GAAG,EAAX;;AACA,SAAK,IAAIC,CAAT,IAAcH,GAAd,EAAmB;AACfE,MAAAA,IAAI,CAACE,IAAL,CAAUD,CAAC,CAAC,SAAD,CAAX;AACH;;AACD,UAAME,MAAM,GAAGZ,cAAc,CAACS,IAAD,CAA7B;AACA,UAAMR,GAAG,CAACW,MAAD,CAAT;AACH,GATD,CASC,OAAOC,CAAP,EAAU;AACPC,IAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACH;AACJ;;AAED,UAAUC,MAAV,GAAmB;AACf;AACA,QAAMd,SAAS,CAACC,aAAD,EAAgBC,WAAhB,CAAf;AACH;;AACD,eAAeY,MAAf","sourcesContent":["import axios from \"axios\";\r\nimport {initListAction} from \"./actionCreators\";\r\nimport { put,takeEvery } from 'redux-saga/effects'\r\nimport { GET_INIT_LIST } from './actionTypes';\r\n// ES6 generator 函数\r\nfunction* getInitList() {\r\n    try {\r\n        const res  = yield axios.get('http://www.hemaisi.com/service/msg/get?page=1&limit=5');\r\n        const arr = res.data.data;\r\n        let list = [];\r\n        for (let v of arr) {\r\n            list.push(v['ip_city']);\r\n        }\r\n        const action = initListAction(list);\r\n        yield put(action);\r\n    }catch (e) {\r\n        console.log('network error');\r\n    }\r\n}\r\n\r\nfunction* mySaga() {\r\n    // 捕获每次派发出来的action\r\n    yield takeEvery(GET_INIT_LIST, getInitList);\r\n}\r\nexport default mySaga;"]},"metadata":{},"sourceType":"module"}